<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>SheCounts</title>
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&display=swap" rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style-starter.css">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }

    header {
      background: #fff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
      font-family: 'Work Sans', sans-serif;
      font-size: 24px;
      color: #333;
      text-decoration: none;
    }

    .navbar-nav {
      display: flex;
      list-style: none;
      padding-left: 0;
    }

    .navbar-nav li {
      margin-right: 20px;
    }

    .navbar-nav a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .header-right .btn {
      margin-left: 20px;
    }

    .menu-btn {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      width: 25px;
      height: 20px;
      cursor: pointer;
    }

    .menu-btn span {
      display: block;
      height: 3px;
      background: #333;
      transition: all 0.3s ease-in-out;
    }

    .menu-btn.active .top {
      transform: rotate(45deg) translateY(8px);
    }

    .menu-btn.active .mid {
      opacity: 0;
    }

    .menu-btn.active .bot {
      transform: rotate(-45deg) translateY(-8px);
    }

    #nav {
      display: none;
      flex-direction: column;
      align-items: center;
      position: absolute;
      top: 60px;
      right: 20px;
      background: #fff;
      border: 1px solid #ddd;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    #nav.open {
      display: flex;
    }

    #nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #nav ul li {
      margin: 10px 0;
    }

    #nav ul li a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    h1,
    h2 {
      font-family: 'Work Sans', sans-serif;
      font-size: 36px;
      color: #333;
      text-align: center;
      margin-top: 20px;
    }

    form,
    .budget-section,
    .about-budget {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    form label,
    .budget-section label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    form input,
    .budget-section input {
      width: calc(100% - 20px);
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    form button,
    .budget-section button {
      width: 100%;
      padding: 10px;
      background: #007bff;
      border: none;
      color: #fff;
      font-weight: 600;
      border-radius: 4px;
      cursor: pointer;
    }

    form button:hover,
    .budget-section button:hover {
      background: #0056b3;
    }

    #result,
    #monthlySavings {
      text-align: center;
      font-size: 18px;
      margin-top: 20px;
    }

    .about-budget {
      padding: 20px;
      margin-top: 20px;
    }

    .about-budget ul {
      padding-left: 20px;
    }

    .about-budget ul li {
      margin-bottom: 10px;
    }
    .center-btn {
        display: block;
        margin: 10px auto; /* Centers the button horizontally */
        width: 15%;
        padding: 10px;
        background: #007bff;
        border: none;
        color: #fff;
        font-weight: 600;
        border-radius: 4px;
        cursor: pointer;
    }
    .center-btn:hover {
        background: #0056b3;
    }    .iframe-container {
        display: flex;
        justify-content: center; /* Horizontally center */
        margin-top: 20px; /* Adjust margin as needed */
    }

    /* Chatbot Styles */
    .chatbot-container {
        max-width: 800px;
        margin: 20px auto;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .chat-window {
        height: 400px;
        overflow-y: auto;
        padding: 20px;
        background: #f8f9fa;
        border-bottom: 1px solid #ddd;
    }

    .chat-message {
        margin-bottom: 15px;
        padding: 10px 15px;
        border-radius: 18px;
        max-width: 80%;
        word-wrap: break-word;
    }

    .bot-message {
        background: #007bff;
        color: white;
        margin-right: auto;
    }

    .user-message {
        background: #e9ecef;
        color: #333;
        margin-left: auto;
        text-align: right;
    }

    .evaluation-message {
        background: #28a745;
        color: white;
        margin-right: auto;
    }

    .evaluation-message.incorrect {
        background: #dc3545;
    }

    .resource-link {
        background: #17a2b8;
        color: white;
        margin-right: auto;
        font-size: 14px;
    }

    .resource-link a {
        color: white;
        text-decoration: underline;
    }

    .welcome-message {
        background: #6c757d;
        color: white;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
    }

    .chat-controls {
        padding: 20px;
        background: white;
    }

    .answer-section {
        margin-top: 15px;
    }

    .chat-input {
        width: calc(100% - 120px);
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 20px;
        margin-right: 10px;
        font-size: 14px;
    }

    .chat-btn {
        padding: 10px 20px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 500;
    }

    .chat-btn:hover {
        background: #0056b3;
    }

    .chat-btn:disabled {
        background: #6c757d;
        cursor: not-allowed;
    }

    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #007bff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

  </style>
</head>

<body>
  <section class="w3l-header">
    <nav class="navbar navbar-expand-lg navbar-light py-3">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img src="assets/images/logo.jpg" alt="Your logo" title="Your logo" style="height:60px;" />
          She<label class="logo-view">Counts</label>
        </a> 
        <div class="header-right d-flex align-items-center">
          <a href="contact.html" class="btn btn-outline-dark d-none d-md-block btn-outline-style mr-4">Contact Us</a>
          <section class="w3l-menu">
            <div class="menu-btn">
              <span class="top"></span>
              <span class="mid"></span>
              <span class="bot"></span>
            </div>
            <div id="nav">
              <ul class="nav-inner">
                <li>
                  <a href="index.html">Home</a>
                </li>
                <li>
                  <a href="about.html">About</a>
                </li>
                <li>
                  <a href="contact.html">Contact</a>
                </li>
                <li>
                  <a href="chatbot.html">Chatbot</a>
                </li>
                <li>
                  <a href="bc.html">Budget Calculator</a>
                </li>
                <li>
                  <a href="reminder.html">Reminders</a>
                </li>
              </ul>
            </div>
          </section>
        </div>
      </div>
    </nav>
  </section>
  <main class="container">
    <h1>Auto Loans Literacy Chatbot</h1>
    
    <!-- Chatbot Interface -->
    <div class="chatbot-container">
      <div class="chat-window" id="chatWindow">
        <div class="welcome-message">
          <p>Welcome! I'll ask you questions about auto loans to test your knowledge. Click "Generate Question" to start!</p>
        </div>
      </div>
      
      <div class="chat-controls">
        <button id="generateQuestionBtn" class="chat-btn">Generate Question</button>
        <div class="answer-section" id="answerSection" style="display: none;">
          <input type="text" id="userAnswer" placeholder="Type your answer here..." class="chat-input">
          <button id="submitAnswerBtn" class="chat-btn">Submit Answer</button>
        </div>
      </div>
    </div>
  </main>

  <!-- <button type="button" onclick=redirectToPage() class="center-btn" disabled>Next</button> -->
  <!-- Next Page Button Script-->
  <script>
    function redirectToPage() {
      window.location.href = 'credit_cards.html';
    }    // Chatbot functionality
    const API_BASE_URL = 'https://new-folder-production-11ef.up.railway.app';
    
    let currentQuestion = '';
    let isWaitingForAnswer = false;

    function addMessage(message, type = 'bot') {
      const chatWindow = document.getElementById('chatWindow');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${type}-message`;
      
      if (type === 'evaluation-correct') {
        messageDiv.className = 'chat-message evaluation-message';
      } else if (type === 'evaluation-incorrect') {
        messageDiv.className = 'chat-message evaluation-message incorrect';
      } else if (type === 'resource') {
        messageDiv.className = 'chat-message resource-link';
      }
      
      messageDiv.innerHTML = message;
      chatWindow.appendChild(messageDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function showLoading(show = true) {
      const generateBtn = document.getElementById('generateQuestionBtn');
      const submitBtn = document.getElementById('submitAnswerBtn');
      
      if (show) {
        generateBtn.innerHTML = '<span class="loading"></span> Generating...';
        submitBtn.innerHTML = '<span class="loading"></span> Evaluating...';
        generateBtn.disabled = true;
        submitBtn.disabled = true;
      } else {
        generateBtn.innerHTML = 'Generate Question';
        submitBtn.innerHTML = 'Submit Answer';
        generateBtn.disabled = false;
        submitBtn.disabled = false;
      }
    }

    async function generateQuestion() {
      showLoading(true);
      
      try {
        const response = await fetch(`${API_BASE_URL}/api/generate_question`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            topic: 'auto loans'
          })
        });

        const data = await response.json();
        
        if (data.success) {
          currentQuestion = data.question;
          addMessage(`<strong>Question:</strong> ${data.question}`);
          document.getElementById('answerSection').style.display = 'block';
          document.getElementById('generateQuestionBtn').style.display = 'none';
          isWaitingForAnswer = true;
        } else {
          addMessage('Sorry, I encountered an error generating a question. Please try again.', 'bot');
        }
      } catch (error) {
        console.error('Error:', error);
        addMessage('Sorry, I cannot connect to the chatbot service. Please make sure the backend is running.', 'bot');
      }
      
      showLoading(false);
    }

    async function submitAnswer() {
      const userAnswer = document.getElementById('userAnswer').value.trim();
      
      if (!userAnswer) {
        alert('Please enter your answer.');
        return;
      }

      addMessage(userAnswer, 'user');
      showLoading(true);

      try {
        const response = await fetch(`${API_BASE_URL}/api/submit_answer`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            answer: userAnswer
          })
        });

        const data = await response.json();
        
        if (data.success) {
          const evaluation = data.evaluation;
          
          if (evaluation.is_correct) {
            addMessage('✅ Correct! Well done!', 'evaluation-correct');
          } else {
            addMessage(`❌ Incorrect. The correct answer is: ${evaluation.correct_answer}`, 'evaluation-incorrect');
            
            if (evaluation.resource) {
              addMessage(`📚 Here's a helpful resource: <br><strong>${evaluation.resource.title}</strong><br><a href="${evaluation.resource.link}" target="_blank">Learn more</a>`, 'resource');
            }
          }
          
          // Reset for next question
          document.getElementById('userAnswer').value = '';
          document.getElementById('answerSection').style.display = 'none';
          document.getElementById('generateQuestionBtn').style.display = 'block';
          isWaitingForAnswer = false;
        } else {
          addMessage('Sorry, I encountered an error evaluating your answer. Please try again.', 'bot');
        }
      } catch (error) {
        console.error('Error:', error);
        addMessage('Sorry, I cannot connect to the chatbot service. Please make sure the backend is running.', 'bot');
      }
      
      showLoading(false);
    }

    // Event listeners
    document.getElementById('generateQuestionBtn').addEventListener('click', generateQuestion);
    document.getElementById('submitAnswerBtn').addEventListener('click', submitAnswer);
    
    // Allow Enter key to submit answer
    document.getElementById('userAnswer').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        submitAnswer();
      }
    });

    // Clear welcome message when first question is generated
    document.getElementById('generateQuestionBtn').addEventListener('click', function() {
      const welcomeMessage = document.querySelector('.welcome-message');
      if (welcomeMessage) {
        welcomeMessage.style.display = 'none';
      }
    }, { once: true });
  </script>

    <!-- jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
    <!-- jQuery -->
    <script src="assets/js/jquery-3.4.1.slim.min.js"></script>
    <!-- Bootstrap js -->
    <script src="assets/js/bootstrap.min.js"></script>
  
    <!-- disable body scroll which navbar is in active -->
    <script>
      $(function () {
        $('.navbar-toggler').click(function () {
          $('body').toggleClass('noscroll');
        })
      });
    </script>
    <!-- disable body scroll which navbar is in active -->
  
  
  
    <script src="assets/js/owl.carousel.js"></script>
    <!-- script for teams1-->
    <script>
      $(document).ready(function () {
        $('.owl-carousel').owlCarousel({
          loop: true,
          margin: 0,
          responsiveClass: true,
          responsive: {
            0: {
              items: 1,
              nav: true
            },
            667: {
              items: 2,
              nav: true,
              margin: 20
            },
            1000: {
              items: 4,
              nav: true,
              loop: true,
              margin: 25
            }
          }
        })
      })
    </script>
    <!-- //script for teams1-->
  
    <script>
      $(document).ready(function () {
  
        var $menuBtn = $('.menu-btn');
        var $nav = $('#nav');
        var $stylebox = $('#style-box');
        var $styleli = $stylebox.find('li');
  
        $menuBtn.on('click', function () {
          var $this = $(this);
          var styles = $stylebox.data('styles');
          $this.toggleClass("active");
          $this.next('#nav').toggleClass("open");
          $stylebox.toggleClass(styles);
        });
  
        $nav.addClass('topslide');
  
        $styleli.on('click', function () {
          var $this = $(this);
          $this.siblings().removeClass('now');
          $this.addClass('now');
          var styles = $this.data('styles');
          $nav.removeClass();
          $nav.addClass(styles);
          $nav.siblings('#style-box').removeClass();
          $nav.siblings('#style-box').data('styles', styles);
        });
      });
    </script>
  
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script>
      $(document).ready(function () {
        $('.popup-with-zoom-anim').magnificPopup({
          type: 'inline',
  
          fixedContentPos: false,
          fixedBgPos: true,
  
          overflowY: 'auto',
  
          closeBtnInside: true,
          preloader: false,
  
          midClick: true,
          removalDelay: 300,
          mainClass: 'my-mfp-zoom-in'
        });
  
        $('.popup-with-move-anim').magnificPopup({
          type: 'inline',
  
          fixedContentPos: false,
          fixedBgPos: true,
  
          overflowY: 'auto',
  
          closeBtnInside: true,
          preloader: false,
  
          midClick: true,
          removalDelay: 300,          mainClass: 'my-mfp-slide-bottom'
        });
      });    </script>

</body>

</html>
